{"version":3,"sources":["../../../../packages/firebase-rxjs/src/user.ts"],"names":[],"mappings":"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","file":"user.js","sourceRoot":"","sourcesContent":["import { auth, User, UserInfo } from 'firebase'\nimport { Observable } from 'rxjs/Observable'\nimport { map } from 'rxjs/operator/map'\nimport { FirebaseApp } from './app'\nimport { AuthCredential, UserCredential } from './interfaces'\n\n\nexport class FirebaseUserCredential {\n  credential?: AuthCredential;\n  user?: FirebaseUser;\n\n  constructor(cred: UserCredential, app: FirebaseApp) {\n    this.credential = cred.credential || undefined;\n    this.user       = cred.user ? new FirebaseUser(cred.user, app) : undefined;\n  }\n}\n\nexport class FirebaseUser {\n\n  get displayName(): string | null {\n    return this.user.displayName\n  }\n\n  get email(): string | null {\n    return this.user.email\n  }\n\n  get emailVerified(): boolean {\n    return this.user.emailVerified;\n  }\n\n  get isAnonymous(): boolean {\n    return this.user.isAnonymous;\n  }\n\n  get photoURL(): string | null {\n    return this.user.photoURL;\n  }\n\n  get providerData(): (UserInfo | null)[] {\n    return this.user.providerData;\n  }\n\n  get providerId(): string {\n    return this.user.providerId;\n  }\n\n  get refreshToken(): string {\n    return this.user.refreshToken;\n  }\n\n  get uid(): string {\n    return this.user.uid\n  }\n\n  constructor(private user: User, private app: FirebaseApp) {}\n\n  /**\n   * @returns {Observable<void>} - Returns {@link DeleteUserError} if operation fails.\n   */\n  delete(): Observable<void> {\n    return this.app.zoneHelper.wrapPromise(() => this.user.delete());\n  }\n\n  getToken(forceRefresh?: boolean): Observable<string> {\n    return this.app.zoneHelper.wrapPromise(() => this.user.getToken(forceRefresh));\n  }\n\n  /**\n   * @returns {Observable<FirebaseUser>} - Returns {@link LinkUserError} if operation fails.\n   */\n  link(credential: AuthCredential): Observable<FirebaseUser> {\n    return map.call(\n      this.app.zoneHelper.wrapPromise(() => this.user.link(credential)),\n      (user: User) => new FirebaseUser(user, this.app)\n    );\n  }\n\n  /**\n   * @returns {Observable<FirebaseUserCredential>} - Returns {@link LinkUserWithPopupError} if\n   *     operation fails.\n   */\n  linkWithPopup(provider: auth.AuthProvider): Observable<FirebaseUserCredential> {\n    return map.call(\n      this.app.zoneHelper.wrapPromise(() => this.user.linkWithPopup(provider)),\n      (cred: UserCredential) => new FirebaseUserCredential(cred, this.app)\n    );\n  }\n\n  /**\n   * @returns {Observable<FirebaseUserCredential>} - Returns {@link LinkUserWithRedirectError} if\n   *     operation fails.\n   */\n  linkWithRedirect(provider: auth.AuthProvider): Observable<FirebaseUserCredential> {\n    return map.call(\n      this.app.zoneHelper.wrapPromise(() => this.user.linkWithRedirect(provider)),\n      (cred: UserCredential) => new FirebaseUserCredential(cred, this.app)\n    );\n  }\n\n  /**\n   * @returns {Observable<void>} - Returns {@link ReauthenticateError} if operation\n   * fails.\n   */\n  reauthenticate(credential: AuthCredential): Observable<void> {\n    return this.app.zoneHelper.wrapPromise(() => this.user.reauthenticate(credential));\n  }\n\n  reload(): Observable<void> {\n    return this.app.zoneHelper.wrapPromise(() => this.user.reload());\n  }\n\n  sendEmailVerification(): Observable<void> {\n    return this.app.zoneHelper.wrapPromise(() => this.user.sendEmailVerification());\n  }\n\n  unlink(providerId: string): Observable<FirebaseUser> {\n    return map.call(\n      this.app.zoneHelper.wrapPromise(() => this.user.unlink(providerId)),\n      (user: User) => new FirebaseUser(user, this.app)\n    );\n  }\n\n  /**\n   * @returns {Observable<void>} - Returns {@link UpdateEmailError} if operation\n   * fails.\n   */\n  updateEmail(newEmail: string): Observable<void> {\n    return this.app.zoneHelper.wrapPromise(() => this.user.updateEmail(newEmail));\n  }\n\n  /**\n   * @returns {Observable<void>} - Returns {@link UpdatePasswordError} if operation\n   * fails.\n   */\n  updatePassword(newPassword: string): Observable<void> {\n    return this.app.zoneHelper.wrapPromise(() => this.user.updatePassword(newPassword));\n  }\n\n  updateProfile(profile: { displayName?: string, photoURL?: string }): Observable<void> {\n    return this.app.zoneHelper.wrapPromise<void>(() => this.user.updateProfile(profile as any));\n  }\n}\n"]}